ext {
    runCurl = this.&runCurl
    encodeBase64 = this.&encodeBase64
}

def runCurl(type, contentType, authorization, url, payload){

    def responseString =""

    new ByteArrayOutputStream().withStream { os ->
        def result = exec {
            executable = "curl"
            args = [
                    '-k', '-X', type,
                    '-H', contentType,
                    '-H', authorization,
                    url,
                    '-d', payload
            ]
            standardOutput = os
        }
        responseString = os.toString()
        println "responseString = " + responseString
    }
    return responseString
}

def encodeBase64(encodingStr){
    String encodedStr = encodingStr.bytes.encodeBase64().toString()
    return encodedStr
}